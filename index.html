<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINAPSE - Protótipo Funcional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .tab-button.active { border-bottom-width: 2px; border-color: #3b82f6; color: #3b82f6; }
        .content-section, #auth-screen, #app-screen, .questionnaire-content { display: none; }
        .active, .active-flex { display: block; }
        @media (min-width: 768px) { .active-flex { display: flex; } }
        .trilha-header { cursor: pointer; transition: background-color 0.3s; }
        .trilha-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .sub-tab-button { border-color: transparent; }
        .sub-tab-button.active { border-color: #3b82f6; color: #3b82f6; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 24px; height: 24px; border-radius: 50%; border-left-color: #3b82f6; animation: spin 1s ease infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
<div id="auth-screen">
    <div class="min-h-screen flex items-center justify-center bg-slate-100">
        <div class="w-full max-w-md bg-white p-8 rounded-xl shadow-lg">
            <div id="login-view">
                <h2 class="text-2xl font-bold text-center text-sky-800 mb-6">Login na SINAPSE</h2>
                <form id="login-form" class="space-y-4">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-slate-700">Email Corporativo</label>
                        <input type="email" id="login-email" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2">
                    </div>
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-slate-700">Senha</label>
                        <input type="password" id="login-password" required class="mt-1 block w-full rounded-md border-slate-300 shadow-sm p-2">
                    </div>
                    <button type="submit" class="w-full bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 px-4 rounded-md shadow">Entrar</button>
                    <p id="login-error" class="text-red-500 text-xs text-center hidden">Email ou senha inválidos.</p>
                </form>
                <p class="text-center text-sm mt-4">Não tem uma conta? <a href="#" onclick="toggleAuthView()" class="font-medium text-sky-600 hover:text-sky-500">Cadastre-se</a></p>
            </div>
            <div id="register-view" class="hidden">
                <h2 class="text-2xl font-bold text-center text-sky-800 mb-6">Cadastro de Colaborador</h2>
                <form id="register-form" class="space-y-4">
                    <div><label for="register-name" class="block text-sm font-medium">Nome Completo</label><input type="text" id="register-name" required class="mt-1 block w-full rounded-md border-slate-300 p-2"></div>
                    <div><label for="register-departamento" class="block text-sm font-medium">Departamento</label><input type="text" id="register-departamento" required class="mt-1 block w-full rounded-md border-slate-300 p-2"></div>
                    <div><label for="register-email" class="block text-sm font-medium">Email Corporativo</label><input type="email" id="register-email" required class="mt-1 block w-full rounded-md border-slate-300 p-2"></div>
                    <div><label for="register-password" class="block text-sm font-medium">Senha</label><input type="password" id="register-password" required class="mt-1 block w-full rounded-md border-slate-300 p-2"></div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md shadow">Cadastrar</button>
                    <p id="register-error" class="text-red-500 text-xs text-center hidden">Este email já está cadastrado.</p>
                </form>
                <p class="text-center text-sm mt-4">Já tem uma conta? <a href="#" onclick="toggleAuthView()" class="font-medium text-sky-600 hover:text-sky-500">Faça login</a></p>
            </div>
        </div>
    </div>
</div>

<div id="app-screen" class="container mx-auto p-4 min-h-screen flex flex-col">
    <header class="bg-sky-800 text-white p-6 rounded-lg shadow-lg mb-6 flex items-center justify-between">
        <div class="flex items-center">
            <img src="assets/logo.jpeg" alt="Logo da SINAPSE" class="h-12 w-auto rounded-full shadow-md mr-4">
            <div>
                <h1 class="text-2xl font-bold">SINAPSE</h1>
                <p class="text-sm text-sky-200" id="welcome-message">Bem-vindo(a)!</p>
            </div>
        </div>
        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-md shadow-sm">Sair</button>
    </header>

    <nav class="mb-6 bg-white p-4 rounded-lg shadow">
        <div class="flex justify-center space-x-4 border-b border-slate-200 pb-2">
            <button onclick="showModule('colaborador')" id="nav-colaborador" class="tab-button py-2 px-4 font-semibold text-slate-600">Módulo do Colaborador</button>
            <button onclick="showModule('gestao')" id="nav-gestao" class="tab-button py-2 px-4 font-semibold text-slate-600">Módulo de Gestão (RH/CIPA)</button>
        </div>
    </nav>

    <main class="flex-grow">
        <div id="module-colaborador" class="module-content">
            <div class="bg-white p-4 rounded-lg shadow mb-4">
                <div class="flex flex-wrap border-b border-slate-200">
                    <button onclick="showSection('colaborador-diagnostico', this)" class="tab-button py-2 px-3 text-sm font-medium">Diagnóstico e Avaliação</button>
                    <button onclick="showSection('colaborador-gamificacao', this)" class="tab-button py-2 px-3 text-sm font-medium">Gamificação</button>
                    <button onclick="showSection('colaborador-plano-ia', this)" class="tab-button py-2 px-3 text-sm font-medium">Plano de Ação com IA</button>
                    <button onclick="showSection('colaborador-trilhas', this)" class="tab-button py-2 px-3 text-sm font-medium">Trilhas do Cuidado</button>
                </div>
            </div>
            <div id="colaborador-diagnostico" class="content-section bg-white p-6 rounded-lg shadow">
                <div class="border-b border-slate-200 mb-6">
                    <nav class="-mb-px flex space-x-6"><button onclick="showQuestionnaireTab('inicial', this)" class="sub-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm">Avaliação Inicial</button><button onclick="showQuestionnaireTab('mensal', this)" class="sub-tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm">Avaliação Mensal</button></nav>
                </div>
                <div id="questionario-inicial-content" class="questionnaire-content"><h3 class="text-xl font-semibold mb-2 text-sky-700">Questionário de Avaliação Inicial</h3><p class="mb-6 text-sm text-slate-600">Suas respostas são confidenciais e usadas para gerar seu plano de cuidado.</p><form id="form-inicial" class="space-y-8"><div><h4 class="font-semibold text-slate-800 border-b pb-2 mb-3">Sobre sua Carga de Trabalho</h4><div class="space-y-4"><p class="font-medium text-sm text-slate-700">Com que frequência você se sente pressionado a trabalhar horas extras não planejadas?</p><div class="flex flex-wrap gap-x-6 gap-y-2 text-sm"><label class="flex items-center"><input type="radio" name="cargaTrabalho" value="Nunca" required class="mr-2">Nunca</label><label class="flex items-center"><input type="radio" name="cargaTrabalho" value="Raramente" class="mr-2">Raramente</label><label class="flex items-center"><input type="radio" name="cargaTrabalho" value="Às vezes" class="mr-2">Às vezes</label><label class="flex items-center"><input type="radio" name="cargaTrabalho" value="Frequentemente" class="mr-2">Frequentemente</label></div></div></div><div><h4 class="font-semibold text-slate-800 border-b pb-2 mb-3">Sobre seu Ambiente e Relações</h4><div class="space-y-4"><p class="font-medium text-sm text-slate-700">Sinto que recebo o apoio necessário dos meus colegas.</p><div class="flex flex-wrap gap-x-6 gap-y-2 text-sm"><label class="flex items-center"><input type="radio" name="apoioColegas" value="Discordo Totalmente" required class="mr-2">Discordo Totalmente</label><label class="flex items-center"><input type="radio" name="apoioColegas" value="Discordo" class="mr-2">Discordo</label><label class="flex items-center"><input type="radio" name="apoioColegas" value="Concordo" class="mr-2">Concordo</label><label class="flex items-center"><input type="radio" name="apoioColegas" value="Concordo Totalmente" class="mr-2">Concordo Totalmente</label></div></div></div><button type="submit" class="w-full md:w-auto bg-sky-600 text-white font-semibold py-2 px-6 rounded-md">Enviar Avaliação Inicial</button></form></div>
                <div id="questionario-mensal-content" class="questionnaire-content"><h3 class="text-xl font-semibold mb-2 text-sky-700">Questionário de Avaliação Mensal</h3><p class="mb-6 text-sm text-slate-600">Um pulso rápido para acompanhar seu bem-estar.</p><form id="form-mensal" class="space-y-8"><div><label for="monthly-stress" class="font-medium text-sm text-slate-700">Nível médio de estresse no trabalho este mês (0-10):</label><div class="flex items-center gap-4 mt-2"><span class="text-lg font-bold text-sky-600 w-8 text-center" id="stress-value">5</span><input id="monthly-stress" name="nivelEstresse" type="range" min="0" max="10" value="5" class="w-full accent-sky-600" oninput="document.getElementById('stress-value').innerText = this.value;"></div></div><div><p class="font-medium text-sm text-slate-700">Humor predominante no trabalho este mês?</p><div class="flex flex-wrap gap-2 text-sm mt-2"><label class="p-2 border rounded-md"><input type="radio" name="humor" value="Motivado(a)" required class="mr-2">Motivado(a)</label><label class="p-2 border rounded-md"><input type="radio" name="humor" value="Satisfeito(a)" class="mr-2">Satisfeito(a)</label><label class="p-2 border rounded-md"><input type="radio" name="humor" value="Cansado(a)" class="mr-2">Cansado(a)</label><label class="p-2 border rounded-md"><input type="radio" name="humor" value="Estressado(a)" class="mr-2">Estressado(a)</label></div></div><button type="submit" class="w-full md:w-auto bg-sky-600 text-white font-semibold py-2 px-6 rounded-md">Enviar Avaliação Mensal</button></form></div>
            </div>
            <div id="colaborador-gamificacao" class="content-section bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-semibold mb-4 text-sky-700">Gamificação e Engajamento</h3><p class="mb-4 text-sm text-slate-600">Acompanhe seu progresso e conquistas.</p><div id="gamificacao-content"></div></div>
            <div id="colaborador-plano-ia" class="content-section bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-semibold mb-4 text-sky-700">Plano de Ação Personalizado (com IA)</h3><div class="space-y-4"><div><label for="gemini-api-key" class="block text-sm font-medium text-slate-700">Sua Chave de API do Google Gemini</label><div class="flex gap-2 mt-1"><input type="password" id="gemini-api-key" placeholder="Cole sua chave de API aqui" class="block w-full rounded-md border-slate-300 p-2"><button onclick="getAIRecommendation()" class="bg-green-600 text-white font-semibold py-2 px-4 rounded-md">Gerar</button></div></div><div class="p-4 border rounded-md bg-slate-50 min-h-[100px]"><h4 class="text-md font-medium text-slate-700">Sugestão de Autocuidado com IA:</h4><div id="ai-recommendation-spinner" class="spinner my-4 mx-auto hidden"></div><p id="ai-recommendation" class="text-sm mt-2"></p></div></div></div>
            <div id="colaborador-trilhas" class="content-section bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-semibold mb-4 text-sky-700">Trilhas do Cuidado</h3><p class="mb-4 text-sm text-slate-600">Com base no seu diagnóstico, uma trilha é sugerida para você.</p><div id="trilhas-content" class="space-y-2"></div></div>
        </div>
        <div id="module-gestao" class="module-content">
            <div class="bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-semibold mb-4 text-amber-700">Dashboard de Gestão (Dados Agregados)</h3><p class="mb-6 text-sm text-slate-600">Visão anônima e agregada do bem-estar dos colaboradores para compor o PGR (NR 01).</p><div class="grid md:grid-cols-2 gap-8"><div class="chart-container"><canvas id="climaEmocionalChart"></canvas><p class="text-center text-sm mt-2 text-slate-600">Clima Emocional Geral</p></div><div class="chart-container"><canvas id="riscoPsicossocialChart"></canvas><p class="text-center text-sm mt-2 text-slate-600">Nível de Estresse Médio por Departamento</p></div></div></div>
        </div>
    </main>
</div>

<script>
    // --- MODELO DE DADOS E BANCO DE DADOS LOCAL ---
    const DB_KEY = 'sinapse_db';

    function getDb() {
        const db = localStorage.getItem(DB_KEY);
        if (!db) {
            const initialDb = { users: [], currentUser: null };
            localStorage.setItem(DB_KEY, JSON.stringify(initialDb));
            return initialDb;
        }
        return JSON.parse(db);
    }

    function saveDb(db) {
        localStorage.setItem(DB_KEY, JSON.stringify(db));
    }

    // --- LÓGICA DE AUTENTICAÇÃO E GERENCIAMENTO DE USUÁRIO ---
    function register(event) {
        event.preventDefault();
        const db = getDb();
        const name = document.getElementById('register-name').value;
        const departamento = document.getElementById('register-departamento').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;

        if (db.users.find(u => u.email === email)) {
            document.getElementById('register-error').classList.remove('hidden');
            return;
        }

        const newUser = {
            id: Date.now(),
            name,
            email,
            password,
            profile: { departamento },
            questionarioInicial: null,
            questionarioMensal: null,
            planoIA: { recomendacao: "Responda aos questionários para gerar uma recomendação." }
        };

        db.users.push(newUser);
        db.currentUser = { id: newUser.id, email: newUser.email, name: newUser.name };
        saveDb(db);
        initApp();
    }

    function login(event) {
        event.preventDefault();
        const db = getDb();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        const user = db.users.find(u => u.email === email && u.password === password);

        if (user) {
            db.currentUser = { id: user.id, email: user.email, name: user.name };
            saveDb(db);
            initApp();
        } else {
            document.getElementById('login-error').classList.remove('hidden');
        }
    }

    function logout() {
        const db = getDb();
        db.currentUser = null;
        saveDb(db);
        initApp();
    }

    function toggleAuthView() {
        document.getElementById('login-view').classList.toggle('hidden');
        document.getElementById('register-view').classList.toggle('hidden');
        document.getElementById('login-error').classList.add('hidden');
        document.getElementById('register-error').classList.add('hidden');
    }

    // --- LÓGICA PRINCIPAL DA APLICAÇÃO ---
    function initApp() {
        const db = getDb();
        if (db.currentUser) {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('app-screen').style.display = 'flex';
            document.getElementById('welcome-message').innerText = `Bem-vindo(a), ${db.currentUser.name}!`;
            showModule('colaborador');
            renderUserData();
        } else {
            document.getElementById('auth-screen').style.display = 'block';
            document.getElementById('app-screen').style.display = 'none';
        }
    }

    function renderUserData() {
        const db = getDb();
        const user = db.users.find(u => u.id === db.currentUser.id);
        if (!user) return;

        // Render Gamificação (exemplo simples)
        let score = 0;
        if (user.questionarioInicial) score += 50;
        if (user.questionarioMensal) score += 25;
        document.getElementById('gamificacao-content').innerHTML = `<p>Pontos de Engajamento: <span class="font-bold text-sky-600">${score}</span></p>`;

        // Render Plano de Ação
        document.getElementById('ai-recommendation').innerText = user.planoIA.recomendacao;

        // Render Trilhas (lógica simplificada)
        let trilhaHtml = '';
        if (user.questionarioMensal && user.questionarioMensal.nivelEstresse > 7) {
            trilhaHtml = `<div class="p-4 bg-red-50 border border-red-200 rounded-lg"><strong>Trilha Sugerida:</strong> CUIDADO PROFUNDO</div>`;
        } else if (user.questionarioMensal && user.questionarioMensal.nivelEstresse > 4) {
            trilhaHtml = `<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg"><strong>Trilha Sugerida:</strong> CUIDADO INTERMEDIÁRIO</div>`;
        } else {
            trilhaHtml = `<div class="p-4 bg-green-50 border border-green-200 rounded-lg"><strong>Trilha Sugerida:</strong> CUIDADO ESSENCIAL</div>`;
        }
        document.getElementById('trilhas-content').innerHTML = trilhaHtml;
    }

    function saveQuestionnaire(event, type) {
        event.preventDefault();
        const db = getDb();
        const userIndex = db.users.findIndex(u => u.id === db.currentUser.id);
        if (userIndex === -1) return;

        const formData = new FormData(event.target);
        const data = Object.fromEntries(formData.entries());

        if (type === 'inicial') {
            db.users[userIndex].questionarioInicial = data;
        } else {
            db.users[userIndex].questionarioMensal = data;
        }

        saveDb(db);
        alert('Questionário salvo com sucesso!');
        renderUserData();
    }

    // --- LÓGICA DE NAVEGAÇÃO E RENDERIZAÇÃO ---
    function showModule(moduleId) {
        document.querySelectorAll('.module-content').forEach(mc => mc.style.display = 'none');
        document.getElementById(`module-${moduleId}`).style.display = 'block';

        document.querySelectorAll('#nav-colaborador, #nav-gestao').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`nav-${moduleId}`).classList.add('active');

        if(moduleId === 'colaborador') {
            showSection('colaborador-diagnostico', document.querySelector('#module-colaborador .tab-button'));
        } else {
            renderGestaoCharts();
        }
    }

    function showSection(sectionId, buttonElement) {
        document.querySelectorAll('#module-colaborador .content-section').forEach(cs => cs.classList.remove('active'));
        document.querySelector(`#${sectionId}`).classList.add('active');
        document.querySelectorAll('#module-colaborador .tab-button').forEach(btn => btn.classList.remove('active'));
        buttonElement.classList.add('active');

        if (sectionId === 'colaborador-diagnostico') {
            showQuestionnaireTab('inicial', document.querySelector('#colaborador-diagnostico .sub-tab-button'));
        }
        if (sectionId === 'colaborador-plano-ia') {
            getAIRecommendation(true); // check on load
        }
    }

    function showQuestionnaireTab(tabName, buttonElement) {
        document.querySelectorAll('.questionnaire-content').forEach(c => c.classList.remove('active'));
        document.querySelector(`#questionario-${tabName}-content`).classList.add('active');
        document.querySelectorAll('.sub-tab-button').forEach(b => b.classList.remove('active'));
        buttonElement.classList.add('active');
    }

    // --- LÓGICA DE IA E GRÁFICOS ---
    async function getAIRecommendation(checkOnly = false) {
        const apiKey = document.getElementById('gemini-api-key').value;
        if (!apiKey && !checkOnly) {
            alert('Por favor, insira sua chave de API do Google Gemini.');
            return;
        }

        const db = getDb();
        const user = db.users.find(u => u.id === db.currentUser.id);

        if (!user.questionarioMensal) {
            document.getElementById('ai-recommendation').innerText = 'Responda primeiro ao questionário mensal para gerar uma recomendação.';
            return;
        }

        if (checkOnly) { // Just render existing data on tab load
            document.getElementById('ai-recommendation').innerText = user.planoIA.recomendacao;
            return;
        }

        document.getElementById('ai-recommendation-spinner').classList.remove('hidden');
        document.getElementById('ai-recommendation').innerText = '';

        const prompt = `Aja como um especialista em bem-estar corporativo. Um colaborador forneceu os seguintes dados de um questionário de pulso: nível de estresse (0 a 10) foi '${user.questionarioMensal.nivelEstresse}' e humor predominante foi '${user.questionarioMensal.humor}'. Com base nisso, forneça uma recomendação de autocuidado curta, prática e encorajadora (máximo de 3 frases). Fale diretamente com o colaborador. Responda em português do Brasil.`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });

            if (!response.ok) throw new Error(`Erro na API: ${response.statusText}`);

            const data = await response.json();
            const recommendation = data.candidates[0].content.parts[0].text;

            document.getElementById('ai-recommendation').innerText = recommendation;

            // Salvar recomendação no DB
            const userIndex = db.users.findIndex(u => u.id === user.id);
            db.users[userIndex].planoIA.recomendacao = recommendation;
            saveDb(db);

        } catch (error) {
            document.getElementById('ai-recommendation').innerText = 'Não foi possível gerar a recomendação. Verifique sua chave de API ou tente novamente mais tarde.';
            console.error('AI Error:', error);
        } finally {
            document.getElementById('ai-recommendation-spinner').classList.add('hidden');
        }
    }

    let climaChartInstance, riscoChartInstance;
    function renderGestaoCharts() {
        const db = getDb();
        if (db.users.length === 0) return;

        // Processar dados para o gráfico de clima
        const humorData = { 'Motivado(a)': 0, 'Satisfeito(a)': 0, 'Cansado(a)': 0, 'Estressado(a)': 0 };
        db.users.forEach(u => {
            if (u.questionarioMensal && u.questionarioMensal.humor) {
                humorData[u.questionarioMensal.humor]++;
            }
        });

        // Processar dados para o gráfico de risco
        const deptoStress = {};
        db.users.forEach(u => {
            if (u.questionarioMensal && u.profile.departamento) {
                if (!deptoStress[u.profile.departamento]) {
                    deptoStress[u.profile.departamento] = { totalStress: 0, count: 0 };
                }
                deptoStress[u.profile.departamento].totalStress += parseInt(u.questionarioMensal.nivelEstresse, 10);
                deptoStress[u.profile.departamento].count++;
            }
        });

        const deptoAvgStress = Object.keys(deptoStress).map(depto => ({
            depto,
            avg: (deptoStress[depto].totalStress / deptoStress[depto].count).toFixed(1)
        }));

        // Renderizar Gráfico de Clima
        const climaCtx = document.getElementById('climaEmocionalChart')?.getContext('2d');
        if (climaCtx) {
            if (climaChartInstance) climaChartInstance.destroy();
            climaChartInstance = new Chart(climaCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(humorData),
                    datasets: [{ data: Object.values(humorData), backgroundColor: ['#22c55e', '#64748b', '#f97316', '#ef4444'] }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }

        // Renderizar Gráfico de Risco por Depto
        const riscoCtx = document.getElementById('riscoPsicossocialChart')?.getContext('2d');
        if (riscoCtx) {
            if (riscoChartInstance) riscoChartInstance.destroy();
            riscoChartInstance = new Chart(riscoCtx, {
                type: 'bar',
                data: {
                    labels: deptoAvgStress.map(d => d.depto),
                    datasets: [{ label: 'Nível de Estresse Médio', data: deptoAvgStress.map(d => d.avg), backgroundColor: '#3b82f6' }]
                },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { beginAtZero: true, max: 10 } } }
            });
        }
    }

    // --- INICIALIZAÇÃO E EVENT LISTENERS ---
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('login-form').addEventListener('submit', login);
        document.getElementById('register-form').addEventListener('submit', register);
        document.getElementById('form-inicial').addEventListener('submit', (e) => saveQuestionnaire(e, 'inicial'));
        document.getElementById('form-mensal').addEventListener('submit', (e) => saveQuestionnaire(e, 'mensal'));
        initApp();
    });
</script>
</body>
</html>